{"ast":null,"code":"import _slicedToArray from\"/Users/vasaamadea/Desktop/finalproject_dibimbing/finalproject_dibimbing/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Container,Grow,Grid,AppBar,TextField,Button,Paper}from'@material-ui/core';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import{getPostsBySearch}from'../../actions/posts';import Posts from'../Posts/Posts';import Form from'../Form/Form';import Pagination from'../Pagination';import useStyles from'./styles';function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var classes=useStyles();var query=useQuery();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var history=useHistory();var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(\"div\",{className:classes.pagination,elevation:6},/*#__PURE__*/React.createElement(Pagination,{page:page}))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{onKeyDown:handleKeyPress,name:\"search\",variant:\"outlined\",label:\"Search Photos\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId})))));};export default Home;","map":{"version":3,"sources":["/Users/vasaamadea/Desktop/finalproject_dibimbing/finalproject_dibimbing/frontend/src/components/Home/Home.js"],"names":["React","useState","useEffect","Container","Grow","Grid","AppBar","TextField","Button","Paper","useDispatch","useHistory","useLocation","getPostsBySearch","Posts","Form","Pagination","useStyles","useQuery","URLSearchParams","search","Home","classes","query","page","get","searchQuery","currentId","setCurrentId","dispatch","setSearch","tags","setTags","history","searchPost","trim","join","push","handleKeyPress","e","keyCode","gridContainer","length","pagination","appBarSearch","target","value","searchButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Grow, Grid, AppBar, TextField, Button, Paper } from '@material-ui/core';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\n\r\n\r\nimport { getPostsBySearch } from '../../actions/posts';\r\nimport Posts from '../Posts/Posts';\r\nimport Form from '../Form/Form';\r\nimport Pagination from '../Pagination';\r\nimport useStyles from './styles'\r\n\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n  }\r\n  const Home = () => {\r\n    const classes = useStyles();\r\n    const query = useQuery();\r\n    const page = query.get('page') || 1;\r\n    const searchQuery = query.get('searchQuery');\r\n  \r\n    const [currentId, setCurrentId] = useState(0);\r\n    const dispatch = useDispatch();\r\n  \r\n    const [search, setSearch] = useState('');\r\n    const [tags, setTags] = useState([]);\r\n    const history = useHistory();\r\n  \r\n    const searchPost = () => {\r\n      if (search.trim() || tags) {\r\n        dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\r\n        history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\r\n      } else {\r\n        history.push('/');\r\n      }\r\n    };\r\n  \r\n    const handleKeyPress = (e) => {\r\n      if (e.keyCode === 13) {\r\n        searchPost();\r\n      }\r\n    };\r\n  \r\n\r\n    return (\r\n      <Grow in>\r\n        <Container maxWidth=\"xl\">\r\n          <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\r\n            <Grid item xs={12} sm={6} md={9}>\r\n              <Posts setCurrentId={setCurrentId} />\r\n              {(!searchQuery && !tags.length) && (\r\n                <div className={classes.pagination} elevation={6}>\r\n                  <Pagination page={page} />\r\n                </div>\r\n              )}\r\n            </Grid>\r\n            <Grid item xs={12} sm={6} md={3}>\r\n              <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\r\n                <TextField onKeyDown={handleKeyPress} name=\"search\" variant=\"outlined\" label=\"Search Photos\" fullWidth value={search} onChange={(e) => setSearch(e.target.value)} />\r\n \r\n                <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\r\n              </AppBar>\r\n              <Form currentId={currentId} setCurrentId={setCurrentId} />\r\n            </Grid>\r\n          </Grid>\r\n\r\n        </Container>\r\n      </Grow>\r\n    );\r\n  };\r\n  \r\n  export default Home;\r\n  "]},"metadata":{},"sourceType":"module"}