{"ast":null,"code":"import _slicedToArray from\"/Users/vasaamadea/Desktop/finalproject_dibimbing/finalproject_dibimbing/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button}from'@material-ui/core';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import useStyles from'./styles';import*as actionType from'../../constants/actionTypes';import photo from'../../images/logo.png';var Navbar=function Navbar(){var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var history=useHistory();var classes=useStyles();var logout=function logout(){dispatch({type:actionType.LOGOUT});history.push('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"default\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.brandContainer},/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:photo,alt:\"icon\",style:{margin:\"5px\"},height:\"60\"}),/*#__PURE__*/React.createElement(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h3\",align:\"center\"},\"PhotoShareApp\")),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",style:{align:'right'},color:\"primary\"},\"Sign In\")));};export default Navbar;","map":{"version":3,"sources":["/Users/vasaamadea/Desktop/finalproject_dibimbing/finalproject_dibimbing/frontend/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Link","useHistory","useLocation","useDispatch","decode","useStyles","actionType","photo","Navbar","JSON","parse","localStorage","getItem","user","setUser","dispatch","location","history","classes","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","margin","heading","toolbar","result","profile","purple","name","imageUrl","charAt","userName","align"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { AppBar, Typography, Toolbar, Avatar, Button } from '@material-ui/core';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\n\r\nimport useStyles from './styles'\r\nimport * as actionType from '../../constants/actionTypes';\r\nimport photo from  '../../images/logo.png';\r\n\r\nconst Navbar = () => {\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    const dispatch = useDispatch();\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const classes = useStyles();\r\n\r\n    const logout = () => {\r\n        dispatch({ type: actionType.LOGOUT });\r\n\r\n        history.push('/auth');\r\n\r\n        setUser(null);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n\r\n        if (token) {\r\n        const decodedToken = decode(token);\r\n\r\n        if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n\r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n    }, [location]);\r\n\r\n    return(\r\n        <AppBar className={classes.appBar} position=\"static\" color=\"default\">\r\n            <div className={classes.brandContainer}>\r\n            <img className={classes.image} src={photo} alt=\"icon\" style={{margin:\"5px\"}} height=\"60\" />\r\n            <Typography component={Link} to=\"/\" className={classes.heading} variant=\"h3\" align=\"center\">PhotoShareApp</Typography>\r\n            </div>\r\n            <Toolbar className={classes.toolbar} >\r\n                {user?.result ? (\r\n                    <div className={classes.profile}>\r\n                        <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\r\n                        <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\r\n                        <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\r\n                    </div>\r\n                    ) : (\r\n                    <Button component={Link} to=\"/auth\" variant=\"contained\" style={{align:'right'}} color=\"primary\">Sign In</Button>\r\n                )}\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n};\r\n\r\nexport default Navbar"]},"metadata":{},"sourceType":"module"}